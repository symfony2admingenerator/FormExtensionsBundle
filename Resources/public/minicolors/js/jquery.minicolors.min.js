!function(i){i&&function(i){function t(t,o){var n=i('<span class="minicolors" />'),s=i.minicolors.defaultSettings;t.data("minicolors-initialized")||(o=i.extend(!0,{},s,o),n.addClass("minicolors-theme-"+o.theme).addClass("minicolors-swatch-position-"+o.swatchPosition).toggleClass("minicolors-swatch-left","left"===o.swatchPosition).toggleClass("minicolors-with-opacity",o.opacity),void 0!==o.position&&i.each(o.position.split(" "),function(){n.addClass("minicolors-position-"+this)}),t.addClass("minicolors-input").data("minicolors-initialized",!0).data("minicolors-settings",o).prop("size",7).prop("maxlength",7).wrap(n).after('<span class="minicolors-panel minicolors-slider-'+o.control+'"><span class="minicolors-slider"><span class="minicolors-picker"></span></span><span class="minicolors-opacity-slider"><span class="minicolors-picker"></span></span><span class="minicolors-grid"><span class="minicolors-grid-inner"></span><span class="minicolors-picker"><span></span></span></span></span>'),t.parent().find(".minicolors-panel").on("selectstart",function(){return!1}).end(),"left"===o.swatchPosition?t.before('<span class="minicolors-swatch"><span></span></span>'):t.after('<span class="minicolors-swatch"><span></span></span>'),o.textfield||t.addClass("minicolors-hidden"),o.inline&&t.parent().addClass("minicolors-inline"),c(t,!1,!0))}function o(i){var t=i.parent();i.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").prop("maxlength",null).removeClass("minicolors-input"),t.before(i).remove()}function n(i){c(i)}function s(i){var t=i.parent(),o=t.find(".minicolors-panel"),n=i.data("minicolors-settings");!i.data("minicolors-initialized")||i.prop("disabled")||t.hasClass("minicolors-inline")||t.hasClass("minicolors-focus")||(a(),t.addClass("minicolors-focus"),o.stop(!0,!0).fadeIn(n.showSpeed,function(){n.show&&n.show.call(i.get(0))}))}function a(){i(".minicolors-input").each(function(){var t=i(this),o=t.data("minicolors-settings"),n=t.parent();o.inline||n.find(".minicolors-panel").fadeOut(o.hideSpeed,function(){n.hasClass("minicolors-focus")&&o.hide&&o.hide.call(t.get(0)),n.removeClass("minicolors-focus")})})}function e(i,t,o){var n,s,a,e,c=i.parents(".minicolors").find(".minicolors-input"),l=c.data("minicolors-settings"),h=i.find("[class$=-picker]"),d=i.offset().left,p=i.offset().top,u=Math.round(t.pageX-d),g=Math.round(t.pageY-p),m=o?l.animationSpeed:0;t.originalEvent.changedTouches&&(u=t.originalEvent.changedTouches[0].pageX-d,g=t.originalEvent.changedTouches[0].pageY-p),0>u&&(u=0),0>g&&(g=0),u>i.width()&&(u=i.width()),g>i.height()&&(g=i.height()),i.parent().is(".minicolors-slider-wheel")&&h.parent().is(".minicolors-grid")&&(n=75-u,s=75-g,a=Math.sqrt(n*n+s*s),e=Math.atan2(s,n),0>e&&(e+=2*Math.PI),a>75&&(a=75,u=75-75*Math.cos(e),g=75-75*Math.sin(e)),u=Math.round(u),g=Math.round(g)),i.is(".minicolors-grid")?h.stop(!0).animate({top:g+"px",left:u+"px"},m,l.animationEasing,function(){r(c,i)}):h.stop(!0).animate({top:g+"px"},m,l.animationEasing,function(){r(c,i)})}function r(i,t){function o(i,t){var o,n;return i.length&&t?(o=i.offset().left,n=i.offset().top,{x:o-t.offset().left+i.outerWidth()/2,y:n-t.offset().top+i.outerHeight()/2}):null}var n,s,a,e,r,c,h,d=i.val(),u=i.attr("data-opacity"),m=i.parent(),f=i.data("minicolors-settings"),v=(m.find(".minicolors-panel"),m.find(".minicolors-swatch")),y=m.find(".minicolors-grid"),w=m.find(".minicolors-slider"),M=m.find(".minicolors-opacity-slider"),C=y.find("[class$=-picker]"),x=w.find("[class$=-picker]"),k=M.find("[class$=-picker]"),S=o(C,y),P=o(x,w),z=o(k,M);if(t.is(".minicolors-grid, .minicolors-slider")){switch(f.control){case"wheel":e=y.width()/2-S.x,r=y.height()/2-S.y,c=Math.sqrt(e*e+r*r),h=Math.atan2(r,e),0>h&&(h+=2*Math.PI),c>75&&(c=75,S.x=69-75*Math.cos(h),S.y=69-75*Math.sin(h)),s=g(c/.75,0,100),n=g(180*h/Math.PI,0,360),a=g(100-Math.floor(P.y*(100/w.height())),0,100),d=b({h:n,s:s,b:a}),w.css("backgroundColor",b({h:n,s:s,b:100}));break;case"saturation":n=g(parseInt(S.x*(360/y.width())),0,360),s=g(100-Math.floor(P.y*(100/w.height())),0,100),a=g(100-Math.floor(S.y*(100/y.height())),0,100),d=b({h:n,s:s,b:a}),w.css("backgroundColor",b({h:n,s:100,b:a})),m.find(".minicolors-grid-inner").css("opacity",s/100);break;case"brightness":n=g(parseInt(S.x*(360/y.width())),0,360),s=g(100-Math.floor(S.y*(100/y.height())),0,100),a=g(100-Math.floor(P.y*(100/w.height())),0,100),d=b({h:n,s:s,b:a}),w.css("backgroundColor",b({h:n,s:s,b:100})),m.find(".minicolors-grid-inner").css("opacity",1-a/100);break;default:n=g(360-parseInt(P.y*(360/w.height())),0,360),s=g(Math.floor(S.x*(100/y.width())),0,100),a=g(100-Math.floor(S.y*(100/y.height())),0,100),d=b({h:n,s:s,b:a}),y.css("backgroundColor",b({h:n,s:100,b:100}))}i.val(p(d,f.letterCase))}t.is(".minicolors-opacity-slider")&&(u=f.opacity?parseFloat(1-z.y/M.height()).toFixed(2):1,f.opacity&&i.attr("data-opacity",u)),v.find("SPAN").css({backgroundColor:d,opacity:u}),l(i,d,u)}function c(i,t,o){var n,s,a,e,r,c,h,d=i.parent(),m=i.data("minicolors-settings"),f=d.find(".minicolors-swatch"),y=d.find(".minicolors-grid"),w=d.find(".minicolors-slider"),M=d.find(".minicolors-opacity-slider"),C=y.find("[class$=-picker]"),x=w.find("[class$=-picker]"),k=M.find("[class$=-picker]");switch(n=p(u(i.val(),!0),m.letterCase),n||(n=p(u(m.defaultValue,!0))),s=v(n),t||i.val(n),m.opacity&&(a=""===i.attr("data-opacity")?1:g(parseFloat(i.attr("data-opacity")).toFixed(2),0,1),isNaN(a)&&(a=1),i.attr("data-opacity",a),f.find("SPAN").css("opacity",a),r=g(M.height()-M.height()*a,0,M.height()),k.css("top",r+"px")),f.find("SPAN").css("backgroundColor",n),m.control){case"wheel":c=g(Math.ceil(.75*s.s),0,y.height()/2),h=s.h*Math.PI/180,e=g(75-Math.cos(h)*c,0,y.width()),r=g(75-Math.sin(h)*c,0,y.height()),C.css({top:r+"px",left:e+"px"}),r=150-s.b/(100/y.height()),""===n&&(r=0),x.css("top",r+"px"),w.css("backgroundColor",b({h:s.h,s:s.s,b:100}));break;case"saturation":e=g(5*s.h/12,0,150),r=g(y.height()-Math.ceil(s.b/(100/y.height())),0,y.height()),C.css({top:r+"px",left:e+"px"}),r=g(w.height()-s.s*(w.height()/100),0,w.height()),x.css("top",r+"px"),w.css("backgroundColor",b({h:s.h,s:100,b:s.b})),d.find(".minicolors-grid-inner").css("opacity",s.s/100);break;case"brightness":e=g(5*s.h/12,0,150),r=g(y.height()-Math.ceil(s.s/(100/y.height())),0,y.height()),C.css({top:r+"px",left:e+"px"}),r=g(w.height()-s.b*(w.height()/100),0,w.height()),x.css("top",r+"px"),w.css("backgroundColor",b({h:s.h,s:s.s,b:100})),d.find(".minicolors-grid-inner").css("opacity",1-s.b/100);break;default:e=g(Math.ceil(s.s/(100/y.width())),0,y.width()),r=g(y.height()-Math.ceil(s.b/(100/y.height())),0,y.height()),C.css({top:r+"px",left:e+"px"}),r=g(w.height()-s.h/(360/w.height()),0,w.height()),x.css("top",r+"px"),y.css("backgroundColor",b({h:s.h,s:100,b:100}))}o||l(i,n,a)}function l(i,t,o){var n=i.data("minicolors-settings");t+o!==i.data("minicolors-lastChange")&&(i.data("minicolors-lastChange",t+o),n.change&&(n.changeDelay?(clearTimeout(i.data("minicolors-changeTimeout")),i.data("minicolors-changeTimeout",setTimeout(function(){n.change.call(i.get(0),t,o)},n.changeDelay))):n.change.call(i.get(0),t,o)))}function h(t){var o=u(i(t).val(),!0),n=w(o),s=i(t).attr("data-opacity");return n?(void 0!==s&&i.extend(n,{a:parseFloat(s)}),n):null}function d(t,o){var n=u(i(t).val(),!0),s=w(n),a=i(t).attr("data-opacity");return s?(void 0===a&&(a=1),o?"rgba("+s.r+", "+s.g+", "+s.b+", "+parseFloat(a)+")":"rgb("+s.r+", "+s.g+", "+s.b+")"):null}function p(i,t){return"uppercase"===t?i.toUpperCase():i.toLowerCase()}function u(i,t){return i=i.replace(/[^A-F0-9]/gi,""),3!==i.length&&6!==i.length?"":(3===i.length&&t&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),"#"+i)}function g(i,t,o){return t>i&&(i=t),i>o&&(i=o),i}function m(i){var t={},o=Math.round(i.h),n=Math.round(255*i.s/100),s=Math.round(255*i.b/100);if(0===n)t.r=t.g=t.b=s;else{var a=s,e=(255-n)*s/255,r=(a-e)*(o%60)/60;360===o&&(o=0),60>o?(t.r=a,t.b=e,t.g=e+r):120>o?(t.g=a,t.b=e,t.r=a-r):180>o?(t.g=a,t.r=e,t.b=e+r):240>o?(t.b=a,t.r=e,t.g=a-r):300>o?(t.b=a,t.g=e,t.r=e+r):360>o?(t.r=a,t.g=e,t.b=a-r):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function f(t){var o=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return i.each(o,function(i,t){1===t.length&&(o[i]="0"+t)}),"#"+o.join("")}function b(i){return f(m(i))}function v(i){var t=y(w(i));return 0===t.s&&(t.h=360),t}function y(i){var t={h:0,s:0,b:0},o=Math.min(i.r,i.g,i.b),n=Math.max(i.r,i.g,i.b),s=n-o;return t.b=n,t.s=0!==n?255*s/n:0,t.h=0!==t.s?i.r===n?(i.g-i.b)/s:i.g===n?2+(i.b-i.r)/s:4+(i.r-i.g)/s:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t}function w(i){return i=parseInt(i.indexOf("#")>-1?i.substring(1):i,16),{r:i>>16,g:(65280&i)>>8,b:255&i}}i.minicolors={defaultSettings:{animationSpeed:100,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"default",show:null,showSpeed:100,swatchPosition:"left",textfield:!0,theme:"default"}},i.extend(i.fn,{minicolors:function(e,r){switch(e){case"destroy":return i(this).each(function(){o(i(this))}),i(this);case"hide":return a(),i(this);case"opacity":return void 0===r?i(this).attr("data-opacity"):(i(this).each(function(){n(i(this).attr("data-opacity",r))}),i(this));case"rgbObject":return h(i(this),"rgbaObject"===e);case"rgbString":case"rgbaString":return d(i(this),"rgbaString"===e);case"settings":return void 0===r?i(this).data("minicolors-settings"):(i(this).each(function(){var t=i(this).data("minicolors-settings")||{};o(i(this)),i(this).minicolors(i.extend(!0,t,r))}),i(this));case"show":return s(i(this).eq(0)),i(this);case"value":return void 0===r?i(this).val():(i(this).each(function(){n(i(this).val(r))}),i(this));case"create":default:return"create"!==e&&(r=e),i(this).each(function(){t(i(this),r)}),i(this)}}}),i(document).on("mousedown.minicolors touchstart.minicolors",function(t){i(t.target).parents().add(t.target).hasClass("minicolors")||a()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(t){var o=i(this);t.preventDefault(),i(document).data("minicolors-target",o),e(o,t,!0)}).on("mousemove.minicolors touchmove.minicolors",function(t){var o=i(document).data("minicolors-target");o&&e(o,t)}).on("mouseup.minicolors touchend.minicolors",function(){i(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(t){t.preventDefault();var o=i(this).parent().find(".minicolors-input"),n=o.parent();n.hasClass("minicolors-focus")?a(o):s(o)}).on("focus.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&s(t)}).on("blur.minicolors",".minicolors-input",function(){var t=i(this),o=t.data("minicolors-settings");t.data("minicolors-initialized")&&(t.val(u(t.val(),!0)),""===t.val()&&t.val(u(o.defaultValue,!0)),t.val(p(t.val(),o.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(t){var o=i(this);if(o.data("minicolors-initialized"))switch(t.keyCode){case 9:a();break;case 13:case 27:a(),o.blur()}}).on("keyup.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&c(t,!0)}).on("paste.minicolors",".minicolors-input",function(){var t=i(this);t.data("minicolors-initialized")&&setTimeout(function(){c(t,!0)},1)})}(i)}(jQuery);
